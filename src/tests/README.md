# Документация к директории [**`test`**](doc.md)

<a name="up"></a>

---

## Описание

Директория **`test`** прелназначена для проведения всех необходимых юнит-тестов проекта.
Тесты написаны с использованием библиотеки **`check.h`**, которая необходимо установить перед использованием.

---

## Запуск

Убедитесь, что библиотека **`check.h`** установлена на вашей системе.
При ее отсутствие можно установить с помощью целей `install_check_arch`, `install_check_debian` и `install_check_macos` [**`Makefile`**](Makefile).

### Запуск выполение unit тестов

```bash
make test
```

```bash
make test_string
```

```bash
make test_sprinf
```

```bash
make test_sscanf
```

### Установка **`check.h`**

- #### **Debian/Ubuntu**

```bash
sudo apt install check
```

```bash
sudo nala install check
```

- #### **Arch/Manjaro**

```bash
sudo pacman -S check
```

```bash
yay -Syy check
```

- #### **MacOS**

```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

```bash
brew install check
```

### Установка **`lcov`**

- #### **Debian/Ubuntu**

```bash
sudo apt install lcov
```

- #### **Arch/Manjaro**

```bash
sudo pacman -S lcov
```

- #### **MacOS**

```bash
brew install lcov
```

### А БЕЗ **`BREW`** Я НАШЕЛ ЭТУ ИНФУ

#### 1. Скачать исходный код lcov

`lcov` — это инструмент, который используется для анализа данных о покрытии, сгенерированных GCC. Он доступен на GitHub. Вы можете скачать его исходный код:

```bash
git clone https://github.com/linux-test-project/lcov.git
```

#### 2. Установка зависимостей

`lcov` требует наличия `perl`, который уже предустановлен на macOS. Однако, если вы хотите использовать `genhtml` (часть `lcov`), вам также понадобится `gcov` (GCC Coverage Tool). Убедитесь, что у вас установлен `gcc`, который включает `gcov`.

Если у вас не установлен `gcc`, вы можете установить его через `xcode-select`:

```bash
xcode-select --install
```

Или вручную через [Xcode Command Line Tools](https://developer.apple.com/download/all/?q=command%20line%20tools).

#### 3. Установка lcov

Перейдите в скачанный каталог `lcov`:

```bash
cd lcov
```

Скопируйте скрипты `lcov` и `genhtml` в директорию, которая находится в вашем `PATH`. Например, в `/usr/local/bin`:

```bash
sudo cp bin/* /usr/local/bin/
```

#### 4. Проверка установки

После установки проверьте, что `lcov` работает:

```bash
lcov --version
```

Если вы видите версию `lcov`, значит установка прошла успешно.

#### 5. Использование lcov

Теперь вы можете использовать `lcov` для сбора и анализа данных о покрытии кода. Например:

```bash
lcov --capture --directory . --output-file coverage.info
genhtml coverage.info --output-directory out
```

Эти команды собирают данные о покрытии и генерируют HTML-отчёт, который можно просмотреть в браузере.

#### Альтернатива: Использование MacPorts

Если вы не хотите использовать Homebrew, но предпочитаете менеджер пакетов, вы можете установить `lcov` через [MacPorts](https://www.macports.org/):

1. Установите MacPorts (если ещё не установлен):
   - Скачайте и установите MacPorts с [официального сайта](https://www.macports.org/install.php).

2. Установите `lcov`:

   ```bash
   sudo port install lcov
   ```

3. Проверьте установку:

   ```bash
   lcov --version
   ```

---

## Описание проекта

Этот проект включает в себя unit-тесты для проверки корректности реализации следующих библиотек:

- **s21_string**: Реализация стандартных функций работы со строками.
- **s21_sprintf**: Реализация функции форматированного вывода.
- **s21_sscanf**: Реализация функции форматированного ввода.

Тесты написаны с использованием библиотеки `Check`, которая нужно установить для запуски тестов.

---

## Запуск тестов

```bash
./unit_test
```

### Для выборочного запуска тестов используйте флаги

```bash
./unit_test -string       # Запуск тестов для s21_string
./unit_test -sprintf      # Запуск тестов для s21_sprintf
./unit_test -sscanf       # Запуск тестов для s21_sscanf
```

---

## Список тестов

### Тесты для s21_string

- **test_s21_memchr**: Проверка функции поиска символа в строке.
- **test_s21_memcmp**: Проверка функции сравнения двух строк.
- **test_s21_memcpy**: Проверка функции копирования памяти.
- **test_s21_memset**: Проверка функции заполнения памяти.
- **test_s21_strncat**: Проверка функции конкатенации строк.
- **test_s21_strchr**: Проверка функции поиска символа в строке.
- **test_s21_strcspn**: Проверка функции поиска первого вхождения символа из набора.
- **test_s21_strncpy**: Проверка функции копирования строки.
- **test_s21_strlen**: Проверка функции вычисления длины строки.
- **test_s21_strerror**: Проверка функции возврата строки ошибки.
- **test_s21_strpbrk**: Проверка функции поиска любого символа из набора.
- **test_s21_strrchr**: Проверка функции поиска последнего вхождения символа.
- **test_s21_strstr**: Проверка функции поиска подстроки.
- **test_s21_strtok**: Проверка функции разделения строки на токены.
- **test_s21_strcpy**: Проверка функции копирования строки.
- **test_s21_to_upper**: Проверка функции преобразования строки в верхний регистр.
- **test_s21_to_lower**: Проверка функции преобразования строки в нижний регистр.
- **test_s21_insert**: Проверка функции вставки строки.
- **test_s21_trim**: Проверка функции удаления пробелов.

### Тесты для s21_sprintf

- **test_s21_sprintf_d**: Проверка форматирования целых чисел (`%d`).
- **test_s21_sprintf_s**: Проверка форматирования строк (`%s`).
- **test_s21_sprintf_f**: Проверка форматирования чисел с плавающей точкой (`%f`).
- **test_s21_sprintf_x**: Проверка форматирования шестнадцатеричных чисел (`%x`).
- **test_s21_sprintf_e**: Проверка форматирования чисел в экспоненциальной записи (`%e`).
- **test_s21_sprintf_g**: Проверка форматирования чисел с автоматическим выбором формата (`%g`).
- **test_s21_sprintf_flags**: Проверка флагов форматирования (`+`, ` `, `0`, `-`).
- **test_s21_sprintf_c**: Проверка форматирования символов (`%c`).
- **test_s21_sprintf_u**: Проверка форматирования беззнаковых целых чисел (`%u`).
- **test_s21_sprintf_o**: Проверка форматирования восьмеричных чисел (`%o`).
- **test_s21_sprintf_p**: Проверка форматирования указателей (`%p`).
- **test_s21_sprintf_n**: Проверка спецификатора `%n`.

### Тесты для s21_sscanf

- **test_s21_sscanf_d**: Проверка чтения целых чисел (`%d`).
- **test_s21_sscanf_i**: Проверка чтения целых чисел в разных системах счисления (`%i`).
- **test_s21_sscanf_u**: Проверка чтения беззнаковых целых чисел (`%u`).
- **test_s21_sscanf_x**: Проверка чтения шестнадцатеричных чисел (`%x`).
- **test_s21_sscanf_o**: Проверка чтения восьмеричных чисел (`%o`).
- **test_s21_sscanf_f**: Проверка чтения чисел с плавающей точкой (`%f`).
- **test_s21_sscanf_s**: Проверка чтения строк (`%s`).
- **test_s21_sscanf_c**: Проверка чтения символов (`%c`).
- **test_s21_sscanf_p**: Проверка чтения указателей (`%p`).
- **test_s21_sscanf_n**: Проверка спецификатора `%n`.

---

## Флаги командной строки

- **-string**: Запуск только тестов для `s21_string`.
- **-sprintf**: Запуск только тестов для `s21_sprintf`.
- **-sscanf**: Запуск только тестов для `s21_sscanf`.
- Без флагов: Запуск всех тестов.

---

### Макросы

Библиотека **`check.h`** предоставляет множество макросов для проверки различных типов данных:

- **`ck_assert_ptr_eq(a, b):`** Проверяет равенство двух указателей.
- **`ck_assert_int_eq(a, b):`** Проверяет равенство двух целых чисел.
- **`ck_assert_str_eq(a, b):`** Проверяет равенство двух строк.
- **`ck_assert_double_eq(a, b):`** Проверяет равенство двух чисел с плавающей точкой.
- **`ck_assert_int_ne(a, b):`** Проверяет, что два целых числа не равны.
- **`ck_assert_ptr_null(p):`** Проверяет, что указатель равен NULL.
- **`ck_assert_ptr_non_null(p):`** Проверяет, что указатель не равен NULL.
- **`ck_assert_uint_eq(a, b):`** Проверяет, два беззнаковых целых числа (`unsigned int`) равны.

---

#### [README](README.md) [UP](#up)
